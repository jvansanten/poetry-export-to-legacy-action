name: 'Poetry legacy export'
description: 'Export project config to legacy formats'
runs:
  using: "composite"
  steps:
    - run: python -m pip install --upgrade poetry
      shell: bash
    - run: poetry lock
      shell: bash
    - run: python create_setup.py
      shell: bash
    - run: |
        echo '# This file was autogenerated by poetry. Do not edit!' > requirements.txt
        poetry export -f requirements.txt >> requirements.txt
      shell: bash